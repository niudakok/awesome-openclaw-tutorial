# OpenClaw教程配图生成脚本使用说明

## 概述

这个脚本使用 `bananapro-image-gen` 技能为教程的每个章节自动生成2-3张高质量配图。

## 特点

- ✅ 自动为17个章节生成配图（共约50张图片）
- ✅ 2K分辨率（适合印刷，约1000dpi）
- ✅ 根据章节内容定制提示词
- ✅ 支持跳过已存在的图片
- ✅ 支持指定章节生成
- ✅ 详细的进度和统计信息

## 前置要求

1. 已安装 `bananapro-image-gen` 技能
2. 配置了 NEXTAI_API_KEY 环境变量
3. Python 3.6+

## 配置API Key

```bash
export NEXTAI_API_KEY="your-api-key-here"
```

## 使用方法

### 1. 查看所有章节

```bash
python generate_chapter_images.py --list
```

输出示例：
```
可用章节:
 1. docs/01-basics/01-introduction.md (3张图片)
 2. docs/01-basics/02-installation.md (2张图片)
 3. docs/01-basics/03-quick-start.md (2张图片)
 ...
```

### 2. 生成所有章节的图片

```bash
python generate_chapter_images.py
```

这会为所有章节生成配图，跳过已存在的图片。

### 3. 生成指定章节的图片

```bash
# 生成单个章节
python generate_chapter_images.py --chapters docs/01-basics/01-introduction.md

# 生成多个章节
python generate_chapter_images.py --chapters \
  docs/01-basics/01-introduction.md \
  docs/01-basics/02-installation.md
```

### 4. 强制重新生成（覆盖已存在的图片）

```bash
python generate_chapter_images.py --force
```

### 5. 重新生成指定章节

```bash
python generate_chapter_images.py --force --chapters docs/01-basics/01-introduction.md
```

## 生成的图片

### 图片位置

图片会保存在对应章节的 `images/` 子目录下：

```
docs/
├── 01-basics/
│   ├── 01-introduction.md
│   └── images/
│       ├── ch01-openclaw-architecture.png
│       ├── ch01-openclaw-vs-chatgpt.png
│       └── ch01-use-cases.png
├── 02-core-features/
│   ├── 04-file-management.md
│   └── images/
│       ├── ch04-smart-search.png
│       ├── ch04-file-organization.png
│       └── ch04-batch-processing.png
...
```

### 图片规格

- 分辨率：2K（约2048x2048像素）
- 格式：PNG
- DPI：约1000dpi（适合印刷）
- 文件大小：约100-500KB/张

### 图片类型

每个章节的图片类型根据内容定制：

1. **架构图**：展示系统架构、组件关系
2. **流程图**：展示操作步骤、工作流程
3. **对比图**：展示功能对比、优劣对比
4. **示例图**：展示实际使用场景、代码示例
5. **概念图**：展示核心概念、思维导图

## 章节配图列表

### 第1章：认识OpenClaw
- OpenClaw核心架构图
- OpenClaw vs ChatGPT对比图
- 应用场景概念图

### 第2章：环境搭建
- 安装流程图
- 系统要求信息图

### 第3章：快速开始
- 首次对话示例图
- 基础命令速查图

### 第4章：本地文件管理
- 智能搜索对比图
- 文件整理流程图
- 批量处理示例图

### 第5章：知识管理
- 知识管理系统架构图
- 笔记工作流程图

### 第6章：日程管理
- 日历集成图
- 智能提醒示例图

### 第7章：自动化工作流
- 自动化场景示例图
- 工作流构建器界面图

### 第8章：Skills扩展
- Skills生态系统图
- Skill开发流程图
- ClawHub技能市场图

### 第9章：多平台集成
- 平台支持图
- 飞书机器人配置流程图

### 第10章：API集成
- API集成架构图
- API调用示例图

### 第11章：高级配置
- 配置文件结构图
- 性能优化建议图

### 第12章：个人效率提升
- 个人效率工作流图
- GTD系统实践图

### 第13章：高级自动化
- 自动化场景图
- 工作流模板库图

### 第14章：创意应用
- 创意工作流图
- 内容类型图

### 第15章：超级个体案例
- 超级个体工作系统图
- 业务自动化流程图
- 成功指标看板图

### 第16章：最佳实践
- 最佳实践建议图
- 故障排查流程图

## 成本估算

- 单张图片成本：约 $0.08（2K分辨率）
- 总图片数量：约50张
- 总成本：约 $4

## 注意事项

### 1. 印刷质量

- 使用2K分辨率确保印刷质量
- 在Word中插入图片时选择"原始大小"
- 不要拉伸或压缩图片

### 2. 生成时间

- 单张图片生成时间：约30-60秒
- 全部生成时间：约30-50分钟
- 建议分批生成，避免超时

### 3. 失败重试

如果某张图片生成失败：

```bash
# 重新生成该章节的图片
python generate_chapter_images.py --force --chapters docs/xx/xx.md
```

### 4. 自定义提示词

如果需要修改某张图片的提示词，编辑 `generate_chapter_images.py` 中的 `CHAPTER_IMAGES` 配置。

## 故障排查

### 问题1：API Key错误

```
❌ 错误：未找到 API Key
```

解决：
```bash
export NEXTAI_API_KEY="your-api-key"
```

### 问题2：生成超时

```
⏱️ 超时: docs/xx/images/xx.png
```

解决：
- 检查网络连接
- 重新运行脚本（会跳过已生成的图片）

### 问题3：图片质量不满意

解决：
- 修改提示词，使其更详细
- 重新生成该图片：`--force --chapters`

## 进阶使用

### 批量生成特定章节

```bash
# 只生成基础章节
python generate_chapter_images.py --chapters \
  docs/01-basics/01-introduction.md \
  docs/01-basics/02-installation.md \
  docs/01-basics/03-quick-start.md
```

### 查看生成进度

脚本会实时显示：
- 当前处理的章节
- 当前生成的图片
- 生成状态（成功/失败/跳过）
- 最终统计信息

### 自定义分辨率

编辑脚本中的 `RESOLUTION` 变量：
```python
RESOLUTION = "4K"  # 更高质量，但成本更高
```

## 最佳实践

1. **先测试单个章节**
   ```bash
   python generate_chapter_images.py --chapters docs/01-basics/01-introduction.md
   ```

2. **检查生成质量**
   - 打开生成的图片
   - 确认内容准确、清晰
   - 如不满意，修改提示词重新生成

3. **分批生成**
   - 避免一次生成所有图片
   - 可以按章节分批进行
   - 便于检查和调整

4. **备份重要图片**
   - 生成满意的图片后及时备份
   - 避免误删或覆盖

## 技术支持

如有问题，请：
1. 查看脚本输出的错误信息
2. 检查 API Key 配置
3. 查看 bananapro-image-gen 技能文档
4. 提交 Issue 到项目仓库

## 更新日志

### v1.0.0 (2026-02-12)
- ✅ 初始版本
- ✅ 支持17个章节，约50张图片
- ✅ 2K分辨率，适合印刷
- ✅ 自动化生成流程
