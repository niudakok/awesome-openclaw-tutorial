# OpenClaw Manager Web 版使用指南

## ✨ 特性

相比 AppleScript 版本，Web 版提供：

- 🎨 **现代化 UI** - 使用 React + Tailwind 构建的美观界面
- 📱 **响应式设计** - 支持桌面和移动设备
- 🔄 **实时更新** - 每 10 秒自动刷新状态
- 🚀 **更快响应** - 无需等待 AppleScript 对话框
- 🌐 **跨平台** - 可以在任何浏览器中使用
- 📊 **更多信息** - 显示详细的服务状态和系统信息

## 🚀 快速开始

### 1. 进入项目目录

```bash
cd openclaw-manager-web
```

### 2. 安装依赖（首次运行）

```bash
npm install
```

### 3. 启动应用

```bash
npm start
```

这会同时启动前端和后端服务器。

### 4. 打开浏览器

访问 http://localhost:3000

## 📸 界面预览

### 主界面

- **头部**: 显示 Logo、标题和刷新按钮
- **操作按钮**: 配置保活、启动所有、停止所有、重启所有
- **服务卡片**: 显示每个 Gateway 的详细信息
- **系统信息**: 显示总体运行状态

### 服务卡片

每个卡片显示：
- ✅ 服务名称（主助理、内容创作助手等）
- ✅ 运行状态（绿色=运行中，红色=已停止）
- ✅ 端口号
- ✅ 使用的模型
- ✅ 快捷操作按钮（查看日志、重启）

## 🎯 功能说明

### 配置保活

点击"⚙️ 配置保活"按钮：
1. 弹出确认对话框
2. 执行 setup-launchd.sh 脚本
3. 配置开机自启动和自动重启
4. 显示配置结果

### 启动所有

点击"▶️ 启动所有"按钮：
1. 加载所有 launchd 服务
2. 启动所有 Gateway
3. 2 秒后自动刷新状态

### 停止所有

点击"⏹️ 停止所有"按钮：
1. 弹出确认对话框
2. 卸载所有 launchd 服务
3. 停止所有 Gateway
4. 2 秒后自动刷新状态

### 重启所有

点击"🔄 重启所有"按钮：
1. 先停止所有服务
2. 等待 1 秒
3. 重新启动所有服务
4. 2 秒后自动刷新状态

### 刷新状态

点击右上角"刷新状态"按钮：
- 立即检查所有服务状态
- 更新界面显示

### 自动刷新

- 每 10 秒自动刷新一次状态
- 无需手动操作
- 始终显示最新状态

## 🔧 开发模式

### 只启动前端

```bash
npm run dev
```

前端会运行在 http://localhost:3000

### 只启动后端

```bash
npm run server
```

后端 API 会运行在 http://localhost:3001

### 同时启动

```bash
npm start
```

使用 concurrently 同时启动前端和后端。

## 📦 生产部署

### 构建前端

```bash
npm run build
```

生成的文件在 `dist/` 目录。

### 部署方案

#### 方案一：本地部署

```bash
# 构建前端
npm run build

# 使用 serve 运行
npx serve dist -p 3000

# 在另一个终端启动后端
npm run server
```

#### 方案二：Docker 部署

创建 `Dockerfile`:

```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

EXPOSE 3000 3001

CMD ["npm", "start"]
```

构建和运行：

```bash
docker build -t openclaw-manager .
docker run -p 3000:3000 -p 3001:3001 openclaw-manager
```

## 🔐 安全注意事项

1. **本地访问**: 默认只监听 localhost，不对外开放
2. **权限控制**: 后端需要执行系统命令，确保运行在可信环境
3. **生产环境**: 如需对外开放，建议添加身份验证

## 🐛 故障排查

### 前端无法连接后端

**问题**: 显示"无法连接到后端服务"

**解决**:
1. 检查后端是否运行：`lsof -i :3001`
2. 检查 vite 代理配置
3. 查看浏览器控制台错误

### API 调用失败

**问题**: 操作按钮点击后显示失败

**解决**:
1. 检查后端日志
2. 确认管理脚本路径正确
3. 检查脚本执行权限：`chmod +x *.sh`

### 服务状态不准确

**问题**: 显示的状态与实际不符

**解决**:
1. 点击"刷新状态"按钮
2. 检查端口是否被其他程序占用
3. 手动运行 `./check-gateways.sh` 对比

## 🎨 自定义

### 修改端口

编辑 `vite.config.js`:

```js
server: {
  port: 3000, // 改为你想要的端口
}
```

编辑 `server.js`:

```js
const PORT = 3001 // 改为你想要的端口
```

### 修改刷新间隔

编辑 `src/App.jsx`:

```js
const interval = setInterval(checkStatus, 10000) // 改为你想要的毫秒数
```

### 修改主题颜色

编辑 `tailwind.config.js`:

```js
theme: {
  extend: {
    colors: {
      primary: '#your-color',
    },
  },
},
```

## 📊 性能优化

1. **生产构建**: 使用 `npm run build` 生成优化后的代码
2. **缓存**: 浏览器会缓存静态资源
3. **懒加载**: 可以添加路由懒加载
4. **压缩**: Vite 自动压缩生产代码

## 🆚 对比

| 特性 | AppleScript 版 | Web 版 |
|------|----------------|--------|
| 界面 | 系统对话框 | 现代化 Web UI |
| 响应速度 | 慢 | 快 |
| 实时更新 | 无 | 有（10秒） |
| 跨平台 | 仅 macOS | 任何浏览器 |
| 移动端 | 不支持 | 支持 |
| 自定义 | 困难 | 容易 |
| 学习成本 | 低 | 中 |

## 💡 最佳实践

1. **开发时**: 使用 `npm start` 同时启动前后端
2. **生产时**: 构建前端，使用 PM2 管理后端
3. **监控**: 定期查看服务状态
4. **备份**: 定期备份配置文件
5. **更新**: 及时更新依赖包

## 🎉 总结

Web 版 OpenClaw Manager 提供了：

- ✅ 更好的用户体验
- ✅ 更快的响应速度
- ✅ 更多的功能
- ✅ 更容易自定义

现在你可以在浏览器中轻松管理你的 4 个 AI 助手了！
